classDiagram
    class GameController {

        -IBoard _board âœ…
        -List~IPlayer~ _players âœ…
        -int _currentPlayerIndex âœ…
        -Dictionary~IPlayer, List<.IPieces>~ _playerPieces âœ…
        +Action~Position,Position~ OnMoveExecuted
        
        + GameController(IBoard, IPlayer, IPlayer) ðŸ’«
        + StartGame()
        + HandleMove(Position, Position)
        + CanMoveTo(Position, IBoard) bool
        + GetPossibleMoves(IBoard) List~Position~
        + EvaluateMove(Position, Position) bool
        + GetCapturedPositions(Position, Position) List~Position~
        + IsCapture(Position, Position) bool
        + MovePiece(IPiece, Position)
        + CapturePiece(Position, Position)
        + HasForcedCaptures(IPlayer) bool      
        + GetCaptureChain(Position, Position) List~Position~
        + PromoteIfNeeded(IPiece)
        + SwitchTurn()
        + GetCurrentPlayer() IPlayer
        + GetAllValidMoves(IPlayer) List~Position[]~
        + IsGameOver() bool
        + EndGame()

    }
    
    %% class IBoard {
    %%     +GetPiece(int, int): IPiece âœ…
    %%     +SetPiece(int, int, IPiece) âœ…
    %% }
    
    %% class Board {
    %%     -IPiece[,] grid âœ…
    %%     +GetPiece(int, int): IPiece âœ…
    %%     +SetPiece(int, int, IPiece) âœ…
    %% }

    class IBoard {
        <<interface>>
        +IPiece this(int, int) âœ…
    }

    class Board {
        -IPiece[,] _grid âœ…
        +IPiece this(int, int) âœ…
    }
    
    class IPlayer {
        +PieceColor Color âœ…
        +string Name âœ…
    }
    
    class Player {
        +PieceColor Color âœ…
        +string Name âœ…
    }
    
    class Position {
        <<Record Struct>>
        +int X âœ…
        +int Y âœ…
    }
    
    class IPiece {
        +PieceColor Color âœ…
        +Position Position âœ…
        +PieceType Type âœ…
    }
    
    class Piece {
        +PieceColor Color âœ…
        +Position Position âœ…
        +PieceType Type âœ…
    }
    
    class PieceType {
        <<Enumeration>>
        NORMAL âœ…
        KING âœ…
    }
    
    class PieceColor {
        <<Enumeration>>
        RED âœ…
        BLACK âœ…
    }

    GameController --> IBoard
    GameController --> IPlayer
    GameController --> IPiece
    GameController --> Position

    IBoard <|-- Board
    IPlayer <|-- Player
    IPiece <|-- Piece
    Piece <|-- PieceType
    Piece <|-- PieceColor

    Position --> IPiece